---
import TransText from '@components/shared/TransText.astro';
import type { AstroComponentFactory } from 'astro/runtime/server/index.js';
import { Image } from 'astro:assets';
import { twMerge } from 'tailwind-merge';

interface Props {
  title: string;
  subtitle?: string;
  image: ImageMetadata;
  imagePosition: 'left' | 'right' | 'center';
  align?: 'left' | 'right' | 'center' | 'justify';
  Content: AstroComponentFactory;
}

const { title, subtitle, image, imagePosition, Content, align } =
  Astro.props as Props;
---

<article data-aos="fade-up" data-aos-offset="0" data-aos-delay="0">
  {
    imagePosition !== 'center' && (
      <div class="flex flex-col lg:flex-row justify-center !gap-x-[2rem]">
        <div
          class:list={[
            'basis-1/2 ',
            imagePosition === 'left'
              ? 'order-2 lg:order-1'
              : 'order-2 lg:order-2',
          ]}
        >
          <Image
            src={image}
            alt={title}
            class="object-cover h-full w-auto rounded-lg lg:rounded-lg hover:shadow-2xl transition-shadow duration-500"
            transition:name={`img-${title}`}
          />
        </div>
        <div
          class:list={[
            'flex flex-col justify-center basis-1/2 px-[1rem] lg:px-0',
            imagePosition === 'left'
              ? 'order-1 lg:order-2 lg:pl-[1rem]'
              : 'order-1 lg:order-1',
          ]}
        >
          <h2
            aria-label={title}
            class="text-4xl lg:text-6xl font-alexbrush font-[100] leading-10 hover:text-teal-600 transition-colors duration-500 cursor-default"
          >
            {title}
          </h2>
          {subtitle && (
            <p
              aria-label={subtitle}
              class="text-lg lg:text-xl font-[300] text-gray-500"
            >
              {subtitle}
            </p>
          )}
          <div
            class={twMerge(
              'prose !font-sansserif !min-w-full',
              align === 'left' ? `!text-left` : '',
              align === 'right' ? `!text-right` : '',
              align === 'center' ? `!text-center` : '',
              align === 'justify' ? `!text-justify` : ''
            )}
          >
            <Content />
          </div>
        </div>
      </div>
    )
  }
  {
    imagePosition === 'center' && (
      <div class="flex flex-col justify-center !gap-y-12">
        <TransText
          literal={title}
          tag="h2"
          class="text-center font-alexbrush font-[100] leading-10 hover:text-teal-600 transition-colors duration-500 cursor-default text-3xl md:text-4xl lg:text-6xl xl:text-4xl 2xl:text-5xl"
        />
        {subtitle && (
          <p
            aria-label={subtitle}
            class="text-lg lg:text-xl font-[300] text-gray-500"
          >
            {subtitle}
          </p>
        )}
        {image && (
          <Image
            src={image}
            alt={title}
            class="object-cover h-full w-auto rounded-none lg:rounded-lg hover:shadow-2xl transition-shadow duration-500"
            transition:name={`img-${title}`}
          />
        )}
        <div
          class={twMerge(
            'prose !font-sansserif !max-w-full',
            align === 'left' ? `!text-left` : '',
            align === 'right' ? `!text-right` : '',
            align === 'center' ? `!text-center` : '',
            align === 'justify' ? `!text-justify` : ''
          )}
        >
          <Content />
        </div>
      </div>
    )
  }
</article>
